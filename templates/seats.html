<!DOCTYPE html>
{% load static %}
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Document title -->
        <title>Bus Ticket Booking</title>
        
        <!-- Link to external stylesheet -->
        <link rel="stylesheet" href="{% static 'css/seats.css' %}"> 

    </head>
    <body>
        <!-- Main container -->
        <div class="main"></div>
        <div class="logo-container">
            <!-- Logo image -->
            <img src='/media/logo.png' alt="Logo" class="logo">
        </div>
        <div class="navbar">
            <!-- Navigation links -->
            <ul>
                <li><a href="{% url 'home' %}">Home</a></li>
                <li><a href="{% url 'home' %}">About</a></li>
                <li><a href="{% url 'home' %}">How to book ticket?</a></li>
                <li><a href="{% url 'home' %}">Services</a></li>
            </ul>
        </div>
        
        <div class="black-panel1">
          <p class="panel-text p1">SuvaYatra Travels</p>
          <p class="panel-text p2">{{schedule.route.from_location }}-{{schedule.route.to_location }}</p>
          <p class="panel-text p3">Bus Number : {{ schedule.bus.bus_number }}</p>
          <p class="panel-text p4">Date / Time : {{ schedule.departure_time }}</p>
          <p class="panel-text p5">Total Seats : {{ schedule.bus.total_seat }}</p>
          <p class="panel-text p6">Ava. Seats : {{ schedule.available_seats }}</p>
          <p class="panel-text p7">Fare: Rs {{ schedule.route.price }}/</p>
      </div>

        <div class="black-panel2">
            <p class="book-seats-text">Select Seats</p>
            <p class="front-text">Front</p>
              <ul class="showcase">
                <li>
                  <div class="seat2"></div>
                  <small>Available</small>
                </li>
                <li>
                  <div class="seat2 selected"></div>
                  <small>Selected</small>
                </li>
                <li>
                  <div class="seat2 sold"></div>
                  <small>Sold</small>
                </li>
              </ul>
              <div class="container">
                <p class="groupA">A</p>
              <p class="groupB">B</p>
          
                <div class="row">
                  <div class="seat"><div class="seat-text1">1A</div></div>
                  <div class="seat"><div class="seat-text1">2A</div></div>
                  <div class="seat"><div class="seat-text1">1B</div></div>
                  <div class="seat"><div class="seat-text1">2B</div></div>
                </div>
          
                <div class="row">
                  <div class="seat"><div class="seat-text1">3A</div></div>
                  <div class="seat"><div class="seat-text1">4A</div></div>
                  <div class="seat"><div class="seat-text1">3B</div></div>
                  <div class="seat"><div class="seat-text1">4B</div></div>
                 
                </div>
                <div class="row">
                  <div class="seat"><div class="seat-text1">5A</div></div>
                  <div class="seat"><div class="seat-text1">6A</div></div>
                  <div class="seat"><div class="seat-text1">5B</div></div>
                  <div class="seat"><div class="seat-text1">6B</div></div>
                  
                </div>
                <div class="row">
                  <div class="seat"><div class="seat-text1">7A</div></div>
                  <div class="seat"><div class="seat-text1">8A</div></div>
                  <div class="seat"><div class="seat-text1">7B</div></div>
                  <div class="seat"><div class="seat-text1">8B</div></div>
                 
                </div>
                <div class="row">
                  <div class="seat"><div class="seat-text1">9A</div></div>
                  <div class="seat"><div class="seat-text1">10A</div></div>
                  <div class="seat"><div class="seat-text1">9B</div></div>
                  <div class="seat"><div class="seat-text1">10B</div></div>
                </div>
                <div class="row">
                  <div class="seat"><div class="seat-text1">11A</div></div>
                  <div class="seat"><div class="seat-text1">12A</div></div>
                  <div class="seat"><div class="seat-text1">11B</div></div>
                  <div class="seat"><div class="seat-text1">12B</div></div>
                  
                </div>
              </div>
              </p>
              <p class="back-text">Back</p>
              <p id="price" class="price-text">Price: </p>
              <p id="selectedSeat" class="seat-text">Seat: </p>
              <form action="{% url 'details' %}" method="get">
                <button type="submit" class="next-button"><span></span>Next</button>
            </form>
            <!-- Add this script for seat selection -->
            <script>
              document.addEventListener('DOMContentLoaded', function () {
                const seats = document.querySelectorAll('.seat');
                const nextButton = document.querySelector('.next-button');
            
                seats.forEach(seat => {
                  seat.addEventListener('click', function () {
                    if (!seat.classList.contains('sold')) {
                      seat.classList.toggle('selected');
                      updateSelectedSeats();
                    }
                  });
                });
            
                nextButton.addEventListener('click', function (event) {
                  const selectedSeats = document.querySelectorAll('.seat.selected');
            
                  // If no seats are selected, prevent form submission
                  if (selectedSeats.length === 0) {
                    event.preventDefault();
                    alert('Please select at least one seat.');
                  }
                });
            
                function updateSelectedSeats() {
                  const selectedSeats = document.querySelectorAll('.seat.selected');
                  const selectedSeatsCount = selectedSeats.length;
                  const pricePerSeat = 1500;
                  const totalPrice = selectedSeatsCount * pricePerSeat;
            
                  // Create an array to store the selected seat numbers
                  const selectedSeatNumbers = [];
            
                  // Iterate through selected seats and extract seat numbers
                  selectedSeats.forEach(seat => {
                    const seatNumber = seat.querySelector('.seat-text1').innerText;
                    selectedSeatNumbers.push(seatNumber);
                  });
            
                  // Update the display with selected seat numbers
                  document.getElementById('selectedSeat').innerText = `Seat: ${selectedSeatsCount > 0 ? selectedSeatNumbers.join(', ') : 'None'}`;
                  document.getElementById('price').innerText = `Price: Rs ${totalPrice}/`;
                }
              });
            </script>
            

    </body>
</html>
