    <!DOCTYPE html>
    {% load static %}
    <html>
        <head>
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- Document title -->
            <title>Book Ticket</title>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

            <!-- Link to external stylesheet -->
            <link rel="stylesheet" href="{% static 'css/home.css' %}">
            {% comment %} <link rel="stylesheet" href="{% static 'css/booking.css' %}"> {% endcomment %}
            <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>

        <style>
            @keyframes down-btn {
                0% { bottom:20px; }
                100% { bottom:0px; }
                0% { opacity:0; }
                100% { opaicty:1; }
            }
            @-webkit-keyframes down-btn {
                0% { bottom:20px; }
                100% { bottom:0px; }
                0% { opacity:0; }
                100% { opaicty:1; }
            }
            @-moz-keyframes down-btn {
                0% { bottom:20px; }
                100% { bottom:0px; }
                0% { opacity:0; }
                100% { opaicty:1; }
            }

            @-o-keyframes down-btn {
                0% { bottom:20px; }
                100% { bottom:0px; }
                0% { opacity:0; }
                100% { opaicty:1; }
            }
            .img-card.iCard-style1:hover {
                -webkit-box-shadow: 0px 15px 15px 10px rgba(19, 19, 19, 0.3);
        -moz-box-shadow: 0px 15px 15px 10px rgba(19, 19, 19, 0.3);
        -o-box-shadow: 0px 15px 15px 10px rgba(19, 19, 19, 0.3);
        box-shadow: 0px 15px 15px 10px rgba(19, 19, 19, 0.3);
    }



                /* Image Card */
                .img-card {
                    width:300px;
                    position: relative;
                    border-radius: 5px;
                    text-align: left;

                    -webkit-box-shadow: 0px 5px 5px 0px rgba(0,0,0,0.3);
                    -moz-box-shadow: 0px 5px 5px 0px rgba(0,0,0,0.3);
                    -o-box-shadow: 0px 5px 5px 0px rgba(0,0,0,0.3);
                    box-shadow: 0px 5px 5px 0px rgba(0,0,0,0.3);
                }
                    .img-card .card-image {
                        position: relative;
                        margin: auto;
                        overflow: hidden;
                        border-radius: 5px 5px 0px 0px;
                        height: 200px;
                    }
                    .img-card .card-image img {
                        width:100%;
                        border-radius: 5px 5px 0px 0px;
                        -webkit-transition: all 0.8s;
                        -moz-transition: all 0.8s;
                        -o-transition: all 0.8s;
                        transition: all 0.8s;
                    }
                    .img-card .card-image:hover img {
                        -webkit-transform: scale(1.1);
                        -moz-transform: scale(1.1);
                        -o-transform: scale(1.1);
                        transform: scale(1.1);
                    }
                    .img-card .card-text {
                        padding: 0 15px 15px;
                        line-height: 1.5;
                    }
                    .img-card .card-link {
                        padding: 20px 15px 30px;
                        width: -webkit-fill-available;
                    }
                        .img-card .card-link a {
                            text-decoration: none;
                            position: relative;
                            padding: 10px 0;
                        }
                        .img-card .card-link a:after {
                            top: 30px;
                            content: "";
                            display: block;
                            height: 2px;
                            left: 50%;
                            position: absolute;
                            width: 0;

                            -webkit-transition: width 0.3s ease 0s, left 0.3s ease 0s;
                            -moz-transition: width 0.3s ease 0s, left 0.3s ease 0s;
                            -o-transition: width 0.3s ease 0s, left 0.3s ease 0s;
                            transition: width 0.3s ease 0s, left 0.3s ease 0s;
                        }

                        .img-card .card-link a:hover:after {
                            width: 100%;
                            left: 0;
                        }

                    .img-card.iCard-style1 .card-title {
                        position: absolute;
                        font-family: 'Open Sans', sans-serif;
                        z-index: 1;
                        top: 10px;
                        left: 10px;
                        font-size: 30px;
                        color: #fff;
                    }

                    .img-card.iCard-style1 .card-text {
                        color: #795548;
                    }
                    .img-card.iCard-style1 .card-link a {
                        color: #FF9800;
                    }
                    .img-card.iCard-style1 .card-link a:after {
                        background: #FF9800;
                    }
                    .card_title {
                        color: hsl(var(--hue-color), 89%, 60%);
                        font-size: 1.1rem;
                        font-weight: 700;
                        letter-spacing: 1px;
                        text-transform: capitalize;
                        margin: 0px;
                    }
                    .meta__info{
                        color: #666963;
                    }

                    .meta__info span{
                        font-size:14px;
                        font-weight:bold;
                    }
                    .form-inline {
                        display: flex;
                        flex-flow: row wrap;
                        align-items: center;
                    }
                    .form-inline label {
                        margin: 5px 10px 5px 0;
                    }
                    .form-inline input {
                        vertical-align: middle;
                        padding: 17px;
                        background-color: #fff;
                        border: 2px solid black;
                    }

                    .form-inline button {
                        padding: 10px 20px;
                        {% comment %} background-color: dodgerblue; {% endcomment %}
                        border: 1px solid #ddd;
                        color: white;
                        cursor: pointer;
                        margin-top: -30px;
                    }

                    .form-inline button:hover {
                        background-color: royalblue;
                    }

                    @media (max-width: 800px) {
                        .form-inline input {
                        margin: 10px 0;
                        }

                        .form-inline {
                        flex-direction: column;
                        align-items: stretch;
                        }
                    }

                    @media (max-width: 800px) {
                            .form-inline button {
                                padding: 10px 20px;
                                background-color: dodgerblue;
                                border: 1px solid #ddd;
                                color: white;
                                cursor: pointer;
                                margin-top: 32px;
                                margin-right:200px;
                            }
        
                        }
                   

                    

        </style>

        </head>
        <body>
            <!--===== HEADER =====-->
            <header class="l-header">
                <nav class="nav bd-grid">
                    <a href="{% url 'home' %}">
                        <h1 class="nav_logo">SuvaYatra</h1>
                    </a>
                    
        
                    <div class="nav__menu" id="nav-menu">
                        <ul class="nav__list">
                            <li class="nav__item"><a href="{% url 'home' %}" class="nav__link active">Route</a></li>
                            <li class="nav__item"><a href="{% url 'home' %}#about" class="nav__link">About</a></li>
                            <li class="nav__item"><a href="{% url 'home' %}#skills" class="nav__link">Help</a></li>
                            <li class="nav__item"><a href="{% url 'home' %}work" class="nav__link">Interior</a></li>
                            <li class="nav__item"><a href="{% url 'home' %}#contact" class="nav__link">Feedback</a></li>                    
                        </ul>
                    </div>
        
                    <div class="nav__toggle" id="nav-toggle">
                        <i class='bx bx-menu'></i>
                    </div>
                </nav>
            </header>
        <main class="l-main">
            <!--===== SKILLS =====-->
            <section class="skills section" id="skills" style="margin-top:75px;">

                <div class="bd-grid">
                    <div>
                        <form class="form-inline" action="{% url 'route' %}" method='POST'>
                            {% csrf_token %}
                            <select class="contact__input from" style="width: 200px; margin-left: 34px; " required
                                name="from_location">
                                <option value="" disabled selected hidden>From</option>
                                {% for route in locations %}
                                <option value="{{route}}">{{route}}</option>
                                {% endfor %}
                            </select>

                            <!-- Select box for 'To' -->
                            <select class="contact__input " style="width: 200px; margin-left: 100px;" required
                            name="to_location" >
                                <option value="" disabled selected hidden>To</option>
                                {% for route in locations %}
                                <option value="{{route}}">{{route}}</option>
                            {% endfor %}
                            </select>

                            <input type="date" id="departure_time" name="departure_time" class="contact__input" style="width: 200px; margin-left: 100px;" required>
                            <button class="contact__button button" type="submit">Search</button>
                        </form>
                    </div>
            </section>

            <!--===== WORK =====-->
            <section class="work section" id="work">
                <div class="work__container bd-grid">
                    {% if routes %}
                        {% for route in routes %}
                        <div class="img-card iCard-style1">
                            <div class="card-content">
                                <div class="card-image">
                                    <img src="{{route.bus.bus_picture.url}}" >
                                </div>
                                <div class="card-text">
                                    <a href="{% url 'seats' route.id %}" class="route-info" title="Click to view details">
                                        <h2 class="card_title"> {{ route.route.from_location }}-{{ route.route.to_location }}</h2>
                                        <p class="meta__info"><span>Route Name:</span> {{ route.route.route_name }}</p>
                                        <p class="meta__info"><span>Bus Number:</span> {{ route.bus.bus_number }}</p>
                                        <p class="meta__info"><span>Time:</span> {{ route.departure_time }}</p>
                                        <p class="meta__info"><span>Total Seats:</span> {{ route.bus.total_seat }}</p>
                                        <p class="meta__info"><span>Available Seats:</span> {{ route.available_seats }}</p>
                                        <p class="meta__info"><span>Fare:</span> {{ route.route.price }}</p>
                                    </a>
                                </div>

                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <p>No routes found.</p>
                    {% endif %}
                </div>
            </section>

        </main>

    <!--===== FOOTER =====-->
 <footer>
    <div class="container">
        <div class="row">
            <div class="footer-col">
                <h4>Contact Us</h4>
                <ul>
                    <li><a href="">Email:suvayatra@gmail.com</a></li>
                    <li><a href="">Phone: 9829179443/9702285911</a></li>
                    <li><a href="">Address: Dillibazar,Kathmandu</a></li>
                </ul>
            </div>
            
            <!-- 1st Column -->
            <div class="col2">
                <p>SuvaYatra</p>
            </div>

            <!-- 2nd Column -->
            <div class="footer-col">
                <h4>Follow Us</h4>
                <ul class="social-icons">
                 <li><a href="https://www.facebook.com/profile.php?id=61555407062591"><i class="fab fa-facebook"></i></a></li>
                
                 <li><a href="https://www.instagram.com/suva.yatra/"><i class="fab fa-instagram"></i></a></li>
                </ul>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col1">
                <p>&#169; SuvaYatra Travels. All rights reserved</p>
            </div>
        </div>
        </div>
    </div>
        </footer>
				
            <script>
                document.addEventListener("DOMContentLoaded", function() {
                var today = new Date().toISOString().split('T')[0];
                document.getElementById("departure_time").min = today;
                });
            </script>

            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    var searchResultsPanel = document.getElementById('search-results-panel');
                    {% if routes %}
                        searchResultsPanel.style.display = 'block';
                    {% endif %}
                });
            </script>

    <script>
        /*===== MENU SHOW =====*/
    const showMenu = (toggleId, navId) =>{
        const toggle = document.getElementById(toggleId),
        nav = document.getElementById(navId)

        if(toggle && nav){
            toggle.addEventListener('click', ()=>{
                nav.classList.toggle('show')
            })
        }
    }
    showMenu('nav-toggle','nav-menu')

    /*==================== REMOVE MENU MOBILE ====================*/
    const navLink = document.querySelectorAll('.nav__link')

    function linkAction(){
        const navMenu = document.getElementById('nav-menu')
        // When we click on each nav__link, we remove the show-menu class
        navMenu.classList.remove('show')
    }
    navLink.forEach(n => n.addEventListener('click', linkAction))
    </script>
    <script type="text/javascript"
            src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js">
    </script>
    <script type="text/javascript">
    (function(){
        emailjs.init("vhLUKJrl1V_R3NBGY");
    })();
    </script>
    <script>
    function sendMail() {
        // Get form values
        let name = document.getElementById("name").value;
        let email = document.getElementById("email").value;
        let subject = document.getElementById("subject").value;
        let message = document.getElementById("message").value;

        // Validate form fields
        if (!name || !email || !subject || !message) {
            alert("All fields are required. Please fill out all fields.");
            return;
        }

        // Validate email format
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            alert("Invalid email address. Please enter a valid email.");
            return;
        }

        // Prepare parameters for EmailJS
        let parms = {
            name: name,
            email: email,
            subject: subject,
            message: message,
        };

        // Send email using EmailJS
        emailjs.send("service_5wr48mf", "template_ghrb405", parms)
            .then(() => {
                alert("Email sent successfully!");
            })
            .catch((error) => {
                console.error("Error sending email:", error);
                alert("Error sending email. Please try again later.");
            });
    }

    </script>




    </body>
    </html>
